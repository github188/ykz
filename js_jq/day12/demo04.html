<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="cookie.js"></script>
		<script>
			onload = function(){
				var aUl = document.getElementsByTagName("ul");
				var aAlink = aUl[0].getElementsByTagName("a");
				for(var i=0; i<aAlink.length; i++){
					aAlink[i].onclick = function(){
						var pId = this.parentNode.children[0].innerHTML;
						var pName = this.parentNode.children[1].innerHTML;
						var pPrice = this.parentNode.children[2].innerHTML;
						
						var arr = getCookie("catrr") ? JSON.parse(getCookie("catrr")) : [];
						
						var a = false;
						
						for(var j=0; j<arr.length; j++){
							if(arr[j].id == pId){
								arr[j].num++;
								a = true;
							}
						}
						if(a == false ){
								var obj = {id:pId,name:pName,price:pPrice,num:1,}
								arr.push(obj);
							}
							
							var d = new Date();
							d.setDate(d.getDate()+2);
							setCookie("catrr",JSON.stringify(arr),d);
							console.log( getCookie("catrr") )
					}
				}
			}
		</script>
	</head>
	<body>
		<h2>商品列表</h2>
		<ul>
			<li>
				<span>id1</span>
				<span>单车</span>
				<span>$100</span>
				<a href="#">加入购物车</a>
			</li>
			<li>
				<span>id2</span>
				<span>摩托</span>
				<span>$1000</span>
				<a href="#">加入购物车</a>
			</li>
			<li>
				<span>id3</span>
				<span>汽车</span>
				<span>$10000</span>
				<a href="#">加入购物车</a>
			</li>
			<li>
				<span>id4</span>
				<span>坦克</span>
				<span>$100000</span>
				<a href="#">加入购物车</a>
			</li>
			<li>
				<span>id5</span>
				<span>飞机</span>
				<span>$1000000</span>
				<a href="#">加入购物车</a>
			</li>
			<li>
				<span>id6</span>
				<span>飞船</span>
				<span>$10000000</span>
				<a href="#">加入购物车</a>
			</li>
		</ul>
		<a href="demo05.html">查看购物车</a>
	</body>
</html>
