<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{margin: 0;padding: 0;}
			.itme{width: 208px;padding: 5px;float: left;}
			.itme img{width: 200px;padding: 3px;border: 1px solid #827C7C;display: block;}
		</style>
		<script>
			onload = onresize = layout;
			function layout(){
				var aItme = document.getElementsByClassName("itme");
				var winwidth = document.documentElement.clientWidth;
				
				var columns = parseInt(winwidth/aItme[0].offsetWidth);
				var columsArr = []
				
				for(var i=0; i<aItme.length; i++){
					if(i < columns){
						aItme[i].style.position = "static";
						columsArr.push(aItme[i].offsetHeight);
					}
					else{
						var minHeight = columsArr[0];
						var minIndex = 0;
						for(var j=0; j<columsArr.length; j++){
							if(minHeight>columsArr[j]){
								minHeight = columsArr[j];
								minIndex = j;
							}
						}
						
						aItme[i].style.position = "absolute";
						aItme[i].style.left = aItme[minIndex].offsetLeft + "px";
						aItme[i].style.top = minHeight +"px";
						columsArr[minIndex] += aItme[i].offsetHeight;
					}
				}
			}
			
			onscroll = function(){
				
				var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
				
				var winHeight = document.documentElement.clientHeight;
				
				var aItme = document.getElementsByClassName("itme");
				var lastaItmeBottom = aItme[aItme.length-1].offsetTop+aItme[aItme.length-1].offsetHeight;
				
				if(scrollTop + winHeight >= lastaItmeBottom){
					
					for(var i=21; i<43; i++){
						
						var div = document.createElement("div");
						div.className = "itme";
						div.innerHTML = "<img src='images1/img ("+i+").jpg' />";
						document.body.appendChild(div);
						
					}
					
				}
				layout();
			}
			
		</script>
	</head>
	<body>
		<div class="itme"><img src="images1/img (1).jpg" /></div>
		<div class="itme"><img src="images1/img (2).jpg" /></div>
		<div class="itme"><img src="images1/img (3).jpg" /></div>
		<div class="itme"><img src="images1/img (4).jpg" /></div>
		<div class="itme"><img src="images1/img (5).jpg" /></div>
		<div class="itme"><img src="images1/img (6).jpg" /></div>
		<div class="itme"><img src="images1/img (7).jpg" /></div>
		<div class="itme"><img src="images1/img (8).jpg" /></div>
		<div class="itme"><img src="images1/img (9).jpg" /></div>
		<div class="itme"><img src="images1/img (10).jpg" /></div>
		<div class="itme"><img src="images1/img (11).jpg" /></div>
		<div class="itme"><img src="images1/img (12).jpg" /></div>
		<div class="itme"><img src="images1/img (13).jpg" /></div>
		<div class="itme"><img src="images1/img (14).jpg" /></div>
		<div class="itme"><img src="images1/img (15).jpg" /></div>
		<div class="itme"><img src="images1/img (16).jpg" /></div>
		<div class="itme"><img src="images1/img (17).jpg" /></div>
		<div class="itme"><img src="images1/img (18).jpg" /></div>
		<div class="itme"><img src="images1/img (19).jpg" /></div>
		<div class="itme"><img src="images1/img (20).jpg" /></div>
	</body>
</html>
